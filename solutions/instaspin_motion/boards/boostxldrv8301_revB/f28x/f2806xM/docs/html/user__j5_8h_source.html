<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>instaspin_motion: user_j5.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">instaspin_motion
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_416f27cf7dcbd2a3d3a01ab75aff42c3.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">user_j5.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="user__j5_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef _USER_J5_H_</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define _USER_J5_H_</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* --COPYRIGHT--,BSD</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2012, Texas Instruments Incorporated</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * are met:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * *  Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * *  Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * *  Neither the name of Texas Instruments Incorporated nor the names of</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *    its contributors may be used to endorse or promote products derived</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    from this software without specific prior written permission.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * --/COPYRIGHT--*/</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// the includes</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// the defines</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span><span class="preprocessor">#ifndef QEP</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga19fb3e749a48942e997a2ef9baef523d">   64</a></span>&#160;<span class="preprocessor">#define USER_IQ_FULL_SCALE_FREQ_Hz        (800.0)   // 800 Example with buffer for 8-pole 6 KRPM motor to be run to 10 KRPM with field weakening; Hz =(RPM * Poles) / 120</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#define USER_IQ_FULL_SCALE_FREQ_Hz        (USER_MOTOR_NUM_POLE_PAIRS/0.008)   // (4/0.008) = 500 Example with buffer for 8-pole 6 KRPM motor to be run to 6 KRPM; Hz = (RPM * Poles) / 120</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga019b68cf5d47bb8ec42d4a8e0e967285">   77</a></span>&#160;<span class="preprocessor">#define USER_IQ_FULL_SCALE_VOLTAGE_V      (24.0)   // 24.0 Example for boostxldrv8301_revB typical usage and the Anaheim motor</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gac2958ac44e5c311165f162a734db3003">   82</a></span>&#160;<span class="preprocessor">#define USER_ADC_FULL_SCALE_VOLTAGE_V       (26.314)      // 26.314 boostxldrv8301_revB voltage scaling</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gad1b9ffd4ae5f81a4a26ebbecf6512867">   87</a></span>&#160;<span class="preprocessor">#define USER_IQ_FULL_SCALE_CURRENT_A         (20.0) // 20.0 Example for boostxldrv8301_revB typical usage</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga885cd34d85b2bebe923b686191b2f8f4">   92</a></span>&#160;<span class="preprocessor">#define USER_ADC_FULL_SCALE_CURRENT_A        (33.0)  // 33.0 boostxldrv8301_revB current scaling</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaf347ff8e2a06070dda80ea50d228b572">   97</a></span>&#160;<span class="preprocessor">#define USER_NUM_CURRENT_SENSORS            (3)   // 3 Preferred setting for best performance across full speed range, allows for 100% duty cycle</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gac175828f121f72dc4ad4b82b17d9506a">  101</a></span>&#160;<span class="preprocessor">#define USER_NUM_VOLTAGE_SENSORS            (3) // 3 Required</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga8767907dc9b2e691c21b313b300a9a3a">  106</a></span>&#160;<span class="preprocessor">#define   I_A_offset    (0.8331743479)</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gad7efb7768ad8545536b254ee52b5bbc9">  107</a></span>&#160;<span class="preprocessor">#define   I_B_offset    (0.8355930448)</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga13926d525cc3499035e43abefdb6bf0f">  108</a></span>&#160;<span class="preprocessor">#define   I_C_offset    (0.8392037153)</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gac55b824f6cbe500535bbf164c58e635a">  113</a></span>&#160;<span class="preprocessor">#define   V_A_offset    (0.5271264911)</span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gae259ebaefeb95bc030a02d98b46291fc">  114</a></span>&#160;<span class="preprocessor">#define   V_B_offset    (0.5257175565)</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gadbb6dfcedc396e609ad210d79cd726ec">  115</a></span>&#160;<span class="preprocessor">#define   V_C_offset    (0.5249399543)</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga0ee5463f0c1af9fdd2a8c15a78c089ac">  125</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define USER_PWM_FREQ_kHz                (15.0) //30.0 Example, 8.0 - 30.0 KHz typical; 45-80 KHz may be required for very low inductance, high speed motors</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga758dfcbc5464b64f18c7002b7f7584f2">  135</a></span>&#160;<span class="preprocessor">#define USER_MAX_VS_MAG_PU        (2.0/3.0)    // Set to 0.5 if a current reconstruction technique is not used.  Look at the module svgen_current in lab10a-x for more info.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga3347df5bb3cadb19ab774a6a706f211c">  142</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define USER_NUM_PWM_TICKS_PER_ISR_TICK        (1)</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga4c85a5be969696df3aa6258782ab9d1e">  151</a></span>&#160;<span class="preprocessor">#define USER_NUM_ISR_TICKS_PER_CTRL_TICK       (1)      // 2 Example, controller clock rate (CTRL) runs at PWM / 2; ex 30 KHz PWM, 15 KHz control</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga4ea27c661d85be419f94fce91bd9fc4e">  155</a></span>&#160;<span class="preprocessor">#define USER_NUM_CTRL_TICKS_PER_CURRENT_TICK   (1)      // 1 Typical, Forward FOC current controller (Iq/Id/IPARK/SVPWM) runs at same rate as CTRL.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaf54b18886576fcaf1e1dc475459bbf2c">  160</a></span>&#160;<span class="preprocessor">#define USER_NUM_CTRL_TICKS_PER_EST_TICK       (1)      // 1 Typical, FAST estimator runs at same rate as CTRL;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga74453d69119b9d660aba03d21d0a77eb">  164</a></span>&#160;<span class="preprocessor">#define USER_NUM_CTRL_TICKS_PER_SPEED_TICK  (15)   // 15 Typical to match PWM, ex: 15KHz PWM, controller, and current loop, 1KHz speed loop</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gac1f9faaf7eb8576fdcd13e846a864c0f">  169</a></span>&#160;<span class="preprocessor">#define USER_NUM_CTRL_TICKS_PER_TRAJ_TICK   (15)   // 15 Typical to match PWM, ex: 10KHz controller &amp; current loop, 1KHz speed loop, 1 KHz Trajectory</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaff22b440b9ec5bbedf293254a1fab9cb">  177</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define USER_MAX_NEGATIVE_ID_REF_CURRENT_A     (-0.5 * USER_MOTOR_MAX_CURRENT)   // -0.5 * USER_MOTOR_MAX_CURRENT Example, adjust to meet safety needs of your motor</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga6b336dda227640906b1a35898e951fec">  182</a></span>&#160;<span class="preprocessor">#define USER_R_OVER_L_EST_FREQ_Hz (300)               // 300 Default</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga84c1807e2e7621a05942e0025c2aeaa1">  187</a></span>&#160;<span class="preprocessor">#define USER_ZEROSPEEDLIMIT   (0.5 / USER_IQ_FULL_SCALE_FREQ_Hz)     // 0.002 pu, 1-5 Hz typical; Hz = USER_ZEROSPEEDLIMIT * USER_IQ_FULL_SCALE_FREQ_Hz</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga3b79e57d9ee8c4cf09a5a65994c5a906">  192</a></span>&#160;<span class="preprocessor">#define USER_FORCE_ANGLE_FREQ_Hz   (2.0 * USER_ZEROSPEEDLIMIT * USER_IQ_FULL_SCALE_FREQ_Hz)      // 1.0 Typical force angle start-up speed</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaf41aafc6945a7f0761272c8541649f85">  199</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define USER_VOLTAGE_FILTER_POLE_Hz  (364.682)   // 364.682, value for boostxldrv8301_revB hardware</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// **************************************************************************</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gab1205b6dc882853cd4894a2024701748">  209</a></span>&#160;<span class="preprocessor">#define USER_SYSTEM_BANDWIDTH      (20.0)</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// BLDC &amp; SMPM motors</span></div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga720bbac48e80fc0968b4e947fc9ce1f0">  213</a></span>&#160;<span class="preprocessor">#define Estun_EMJ_04APB22           101</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga1db05a906321a2045cbd5e01c6ec5933">  214</a></span>&#160;<span class="preprocessor">#define Anaheim_BLY172S             102</span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga1e6a12c65befb881b17a0928d972f447">  215</a></span>&#160;<span class="preprocessor">#define Teknic_M2310PLN04K          104</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// IPM motors</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// If user provides separate Ls-d, Ls-q</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// else treat as SPM with user or identified average Ls</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga1c5773197be33d5d4f932dc8d65dca7e">  220</a></span>&#160;<span class="preprocessor">#define Belt_Drive_Washer_IPM       201</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// ACIM motors</span></div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gabd71b173854741e07b88ea9b38a43295">  223</a></span>&#160;<span class="preprocessor">#define Marathon_5K33GN2A           301</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">//#define USER_MOTOR Estun_EMJ_04APB22</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaa8244d3e06916f730a017b339d747222">  229</a></span>&#160;<span class="preprocessor">#define USER_MOTOR Anaheim_BLY172S</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">//#define USER_MOTOR Teknic_M2310PLN04K</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">//#define USER_MOTOR Belt_Drive_Washer_IPM</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">//#define USER_MOTOR Marathon_5K33GN2A</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#if (USER_MOTOR == Estun_EMJ_04APB22)                  // Name must match the motor #define</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#define USER_MOTOR_TYPE                 MOTOR_Type_Pm  // Motor_Type_Pm (All Synchronous: BLDC, PMSM, SMPM, IPM) or Motor_Type_Induction (Asynchronous ACI)</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#define USER_MOTOR_NUM_POLE_PAIRS       (4)            // PAIRS, not total poles. Used to calculate user RPM from rotor Hz only</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rr                   (NULL)         // Induction motors only, else NULL</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rs                   (2.303403)     // Identified phase to neutral resistance in a Y equivalent circuit (Ohms, float)</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_d                 (0.008464367)  // For PM, Identified average stator inductance  (Henry, float)</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_q                 (0.008464367)  // For PM, Identified average stator inductance  (Henry, float)</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#define USER_MOTOR_RATED_FLUX           (0.38)         // Identified TOTAL flux linkage between the rotor and the stator (V/Hz)</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAGNETIZING_CURRENT  (NULL)         // Induction motors only, else NULL</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#define USER_MOTOR_RES_EST_CURRENT      (1.0)          // During Motor ID, maximum current (Amperes, float) used for Rs estimation, 10-20% rated current</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#define USER_MOTOR_IND_EST_CURRENT      (-1.0)         // During Motor ID, maximum current (negative Amperes, float) used for Ls estimation, use just enough to enable rotation</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_CURRENT          (3.82)         // CRITICAL: Used during ID and run-time, sets a limit on the maximum current command output of the provided Speed PI Controller to the Iq controller</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#define USER_MOTOR_FLUX_EST_FREQ_Hz     (20.0)         // During Motor ID, maximum commanded speed (Hz, float), ~10% rated</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#define USER_MOTOR_ENCODER_LINES        (2500.0)       // Number of lines on the motor&#39;s quadrature encoder</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_SPEED_KRPM       (3.0)          // Maximum speed that the motor</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#define USER_SYSTEM_INERTIA             (0.02)         // Inertia of the motor &amp; system, should be estimated by SpinTAC Velocity Identify</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#define USER_SYSTEM_FRICTION            (0.01)         // Friction of the motor &amp; system, should be estimated by SpinTAC Velocity Identify</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#elif (USER_MOTOR == Anaheim_BLY172S)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga1936ee2299493ffae505eb4209e44e7d">  254</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_TYPE                 MOTOR_Type_Pm</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga97ac2f6a07a7313fdcda3e3ab13f9743">  255</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_NUM_POLE_PAIRS       (4)</span></div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga279660f19852f2c98a7f71d8df6ddfc8">  256</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_Rr                   (NULL)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga603d76056d1fad8325394a9e051c2f2f">  257</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_Rs                   (0.4110007)</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga818fa09e3dd4a62c0eceb214662f526f">  258</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_d                 (0.0007092811)</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga4e2b6e103f1f814c8c47b9788a059939">  259</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_q                 (0.0007092811)</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga8e3bc259e50fa541e956edcd1a36446d">  260</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_RATED_FLUX           (0.03279636)</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaebf54bd30b13ff51b65d9ffc2229af02">  261</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_MAGNETIZING_CURRENT  (NULL)</span></div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga3cdd5e7c688b539b6bb31799fc1d1557">  262</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_RES_EST_CURRENT      (1.0)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga046b1ea4bb65569cdb3a5e49ca31a246">  263</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_IND_EST_CURRENT      (-1.0)</span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga8c6bb694700e5f284965fb7bbf5a4388">  264</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_CURRENT          (5.0)</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga3e9138d5751b73651ec142862dcebe2e">  265</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_FLUX_EST_FREQ_Hz     (20.0)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga9bdc06e6a201657b82cf64a0c75a7ba5">  266</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_ENCODER_LINES        (2000.0)</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gaad0b4826546927ddf74296fbf3843b89">  267</a></span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_SPEED_KRPM       (4.0)</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#ga185ecd7ca278dab922aa495e4a80735d">  268</a></span>&#160;<span class="preprocessor">#define USER_SYSTEM_INERTIA             (0.02)</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="group___u_s_e_r.html#gad80ecef689ef011af821177cd76658e2">  269</a></span>&#160;<span class="preprocessor">#define USER_SYSTEM_FRICTION            (0.01)</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#elif (USER_MOTOR == Teknic_M2310PLN04K)</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#define USER_MOTOR_TYPE                 MOTOR_Type_Pm</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#define USER_MOTOR_NUM_POLE_PAIRS       (4)</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rr                   (NULL)</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rs                   (0.3918252)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_d                 (0.00023495)</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_q                 (0.00023495)</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#define USER_MOTOR_RATED_FLUX           (0.03955824)</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAGNETIZING_CURRENT  (NULL)</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#define USER_MOTOR_RES_EST_CURRENT      (1.0)</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#define USER_MOTOR_IND_EST_CURRENT      (-0.5)</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_CURRENT          (7.0)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#define USER_MOTOR_FLUX_EST_FREQ_Hz     (20.0)</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#define USER_MOTOR_ENCODER_LINES        (1000.0)</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_SPEED_KRPM       (4.0)</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#define USER_SYSTEM_INERTIA             (0.02)</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#define USER_SYSTEM_FRICTION            (0.01)</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#elif (USER_MOTOR == Belt_Drive_Washer_IPM)</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#define USER_MOTOR_TYPE                 MOTOR_Type_Pm</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#define USER_MOTOR_NUM_POLE_PAIRS       (4)</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rr                   (NULL)</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rs                   (2.832002)</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_d                 (0.0115)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_q                 (0.0135)</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#define USER_MOTOR_RATED_FLUX           (0.5022156)</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAGNETIZING_CURRENT  (NULL)</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">#define USER_MOTOR_RES_EST_CURRENT      (1.0)</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#define USER_MOTOR_IND_EST_CURRENT      (-1.0)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_CURRENT          (4.0)</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#define USER_MOTOR_FLUX_EST_FREQ_Hz     (20.0)</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#elif (USER_MOTOR == Marathon_5K33GN2A)                      // Name must match the motor #define</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#define USER_MOTOR_TYPE                 MOTOR_Type_Induction // Motor_Type_Pm (All Synchronous: BLDC, PMSM, SMPM, IPM) or Motor_Type_Induction (Asynchronous ACI)</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#define USER_MOTOR_NUM_POLE_PAIRS       (2)                  // PAIRS, not total poles. Used to calculate user RPM from rotor Hz only</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rr                   (5.508003)           // Identified phase to neutral in a Y equivalent circuit (Ohms, float)</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#define USER_MOTOR_Rs                   (10.71121)           // Identified phase to neutral in a Y equivalent circuit (Ohms, float)</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_d                 (0.05296588)         // For Induction, Identified average stator inductance  (Henry, float)</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#define USER_MOTOR_Ls_q                 (0.05296588)         // For Induction, Identified average stator inductance  (Henry, float)</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#define USER_MOTOR_RATED_FLUX           (0.8165*220.0/60.0)  // sqrt(2/3)* Rated V (line-line) / Rated Freq (Hz)</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAGNETIZING_CURRENT  (1.378)              // Identified magnetizing current for induction motors, else NULL</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#define USER_MOTOR_RES_EST_CURRENT      (0.5)                // During Motor ID, maximum current (Amperes, float) used for Rs estimation, 10-20% rated current</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#define USER_MOTOR_IND_EST_CURRENT      (NULL)               // not used for induction</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_CURRENT          (2.0)                // CRITICAL: Used during ID and run-time, sets a limit on the maximum current command output of the provided Speed PI Controller to the Iq controller</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#define USER_MOTOR_FLUX_EST_FREQ_Hz     (5.0)                // During Motor ID, maximum commanded speed (Hz, float). Should always use 5 Hz for Induction.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#define USER_MOTOR_ENCODER_LINES        (2048.0)             // Number of lines on the motor&#39;s quadrature encoder</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#define USER_MOTOR_MAX_SPEED_KRPM       (1.725)              // Maximum speed that the motor</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">#define USER_SYSTEM_INERTIA             (0.02)               // Inertia of the motor &amp; system, should be estimated by SpinTAC Velocity Identify</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#define USER_SYSTEM_FRICTION            (0.01)               // Friction of the motor &amp; system, should be estimated by SpinTAC Velocity Identify</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#error No motor type specified</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#endif // extern &quot;C&quot;</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#endif // end of _USER_J5_H_ definition</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 8 2015 14:15:16 for instaspin_motion by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
